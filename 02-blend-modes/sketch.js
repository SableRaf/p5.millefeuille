import{createLayerSystem,BlendModes}from"../lib/p5.millefeuille.esm.js";let ls,redGradient,greenGradient,blueGradient,backgroundGraphic;function createGradientEllipse(e,r,l){const a=createGraphics(r,l),n=a.drawingContext,t=n.createLinearGradient(0,l/2,r,l/2);return t.addColorStop(0,`rgb(${e[0]}, ${e[1]}, ${e[2]})`),t.addColorStop(1,"rgb(255, 255, 255)"),n.fillStyle=t,a.noStroke(),a.ellipse(r/2,l/2,r,l),a}function createBackgroundGradient(e,r){const l=createGraphics(e,r);l.noStroke();const a=100;for(let n=0;n<a;n++){const t=map(n,0,a,0,r),i=r/a;let d,s,o;if(n<50){const e=n/50;d=lerp(255,255,e),s=lerp(255,0,e),o=lerp(0,255,e)}else{const e=(n-50)/50;d=lerp(255,0,e),s=lerp(0,255,e),o=lerp(255,255,e)}for(let r=0;r<a;r++){const n=map(r,0,a,0,e),c=e/a;let p=d,g=s,u=o;if(r<50){const e=r/50;p=lerp(0,d,e),g=lerp(0,s,e),u=lerp(0,o,e)}else{const e=(r-50)/50;p=lerp(d,255,e),g=lerp(s,255,e),u=lerp(o,255,e)}l.fill(p,g,u),l.rect(n,t,c,i)}}return l}window.setup=function(){createCanvas(600,600,WEBGL),backgroundGraphic=createBackgroundGradient(600,600),redGradient=createGradientEllipse([255,0,0],200,560),greenGradient=createGradientEllipse([0,255,0],200,560),blueGradient=createGradientEllipse([0,0,255],200,560),ls=createLayerSystem(),ls.createLayer("Background"),ls.createLayer("Red Ellipse").setBlendMode(BlendModes.NORMAL),ls.createLayer("Green Ellipse").setBlendMode(BlendModes.NORMAL),ls.createLayer("Blue Ellipse").setBlendMode(BlendModes.NORMAL),ls.createUI()},window.draw=function(){ls.begin("Background"),clear(),push(),imageMode(CENTER),image(backgroundGraphic,0,0),pop(),ls.end(),ls.begin("Red Ellipse"),clear(),push(),rotate(radians(30)),imageMode(CENTER),image(redGradient,0,0),pop(),ls.end(),ls.begin("Green Ellipse"),clear(),push(),rotate(radians(90)),imageMode(CENTER),image(greenGradient,0,0),pop(),ls.end(),ls.begin("Blue Ellipse"),clear(),push(),rotate(radians(150)),imageMode(CENTER),image(blueGradient,0,0),pop(),ls.end(),ls.render()};