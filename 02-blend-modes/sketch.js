let ls,redGradient,greenGradient,blueGradient,backgroundGraphic,blendModeSelect;function createGradientEllipse(e,l,t,n="gradientEllipse"){const d=createElement("canvas"),r=createGraphics(l,t,d.elt);d.attribute("id",n),d.attribute("class","p5.Graphics"),d.attribute("width",l),d.attribute("height",t);const s=r.drawingContext,a=s.createLinearGradient(0,t/2,l,t/2);return a.addColorStop(0,`rgb(${e[0]}, ${e[1]}, ${e[2]})`),a.addColorStop(1,"rgb(255, 255, 255)"),s.fillStyle=a,r.noStroke(),r.ellipse(l/2,t/2,l,t),r}function createBackgroundGradient(e,l,t="backgroundGradient"){const n=createElement("canvas"),d=createGraphics(e,l,n.elt);n.attribute("id",t),n.attribute("class","p5.Graphics"),n.attribute("width",e),n.attribute("height",l),d.noStroke();const r=100;for(let t=0;t<r;t++){const n=map(t,0,r,0,l),s=l/r;let a,o,i;if(t<50){const e=t/50;a=lerp(255,255,e),o=lerp(255,0,e),i=lerp(0,255,e)}else{const e=(t-50)/50;a=lerp(255,0,e),o=lerp(0,255,e),i=lerp(255,255,e)}for(let l=0;l<r;l++){const t=map(l,0,r,0,e),c=e/r;let p=a,b=o,g=i;if(l<50){const e=l/50;p=lerp(0,a,e),b=lerp(0,o,e),g=lerp(0,i,e)}else{const e=(l-50)/50;p=lerp(a,255,e),b=lerp(o,255,e),g=lerp(i,255,e)}d.fill(p,b,g),d.rect(t,n,c,s)}}return d}function createBlendModeSelect(e){const l=createDiv();l.style("margin","16px"),l.style("padding","12px 16px"),l.style("background","rgba(255, 255, 255, 0.08)"),l.style("border-radius","8px"),l.style("display","inline-flex"),l.style("align-items","center"),l.style("gap","12px"),l.parent(select(".info"));const t=createSpan("Set blend mode globally");function n(e){e.style("background","rgba(0, 0, 0, 0.4)"),e.style("border","1px solid rgba(255, 255, 255, 0.2)"),e.style("border-radius","6px"),e.style("color","#e8e8e8"),e.style("width","32px"),e.style("height","34px"),e.style("font-size","14px"),e.style("cursor","pointer"),e.style("transition","all 0.15s")}t.style("font-weight","600"),t.style("color","#e8e8e8"),t.style("font-size","14px"),t.parent(l);const d=createButton("◀");d.parent(l),n(d),blendModeSelect=createSelect(),blendModeSelect.parent(l),blendModeSelect.style("background","rgba(0, 0, 0, 0.4)"),blendModeSelect.style("border","1px solid rgba(255, 255, 255, 0.2)"),blendModeSelect.style("border-radius","6px"),blendModeSelect.style("color","#e8e8e8"),blendModeSelect.style("padding","8px 12px"),blendModeSelect.style("font-size","14px"),blendModeSelect.style("cursor","pointer"),blendModeSelect.style("outline","none"),blendModeSelect.style("min-width","140px"),blendModeSelect.style("appearance","none"),blendModeSelect.style("background-image","url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23e8e8e8' width='24px' height='24px'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E\")"),blendModeSelect.style("background-repeat","no-repeat"),blendModeSelect.style("background-position","right 8px center"),blendModeSelect.style("background-size","16px 16px");const r=createButton("▶");r.parent(l),n(r);const s=Object.keys(BlendModes);function a(e){ls.setBlendMode("Red Ellipse",e),ls.setBlendMode("Green Ellipse",e),ls.setBlendMode("Blue Ellipse",e),ls.ui.syncState()}s.forEach(e=>{const l=e.split("_").map(e=>e.charAt(0)+e.slice(1).toLowerCase()).join(" ");blendModeSelect.option(l,BlendModes[e])}),blendModeSelect.changed(()=>{a(blendModeSelect.value())}),d.mousePressed(()=>{const e=(s.findIndex(e=>BlendModes[e]===blendModeSelect.value())-1+s.length)%s.length;blendModeSelect.selected(BlendModes[s[e]]),a(blendModeSelect.value())}),r.mousePressed(()=>{const e=(s.findIndex(e=>BlendModes[e]===blendModeSelect.value())+1)%s.length;blendModeSelect.selected(BlendModes[s[e]]),a(blendModeSelect.value())})}window.setup=function(){createCanvas(600,600,WEBGL),backgroundGraphic=createBackgroundGradient(600,600),redGradient=createGradientEllipse([255,0,0],200,560,"redEllipse"),greenGradient=createGradientEllipse([0,255,0],200,560,"greenEllipse"),blueGradient=createGradientEllipse([0,0,255],200,560,"blueEllipse"),ls=createLayerSystem(),ls.createLayer("Background"),ls.createLayer("Red Ellipse").setBlendMode(BlendModes.NORMAL),ls.createLayer("Green Ellipse").setBlendMode(BlendModes.NORMAL),ls.createLayer("Blue Ellipse").setBlendMode(BlendModes.NORMAL),ls.createUI(),createBlendModeSelect(ls)},window.draw=function(){ls.begin("Background"),clear(),push(),imageMode(CENTER),image(backgroundGraphic,0,0),pop(),ls.end(),ls.begin("Red Ellipse"),clear(),push(),rotate(radians(30)),imageMode(CENTER),image(redGradient,0,0),pop(),ls.end(),ls.begin("Green Ellipse"),clear(),push(),rotate(radians(90)),imageMode(CENTER),image(greenGradient,0,0),pop(),ls.end(),ls.begin("Blue Ellipse"),clear(),push(),rotate(radians(150)),imageMode(CENTER),image(blueGradient,0,0),pop(),ls.end(),ls.render()};